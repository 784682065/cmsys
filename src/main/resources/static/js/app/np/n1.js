single = {    init: function () {        tableType = "abroad";        inputType = "text";        needUserInfo = 1;        needUserSex = 1;        addOrView = getCookie("addOrView");        if (addOrView == "add") {            $(".back").attr("data", "add");            nps.initAdd();            $("#startoff,#endoff").attr("min", formats.timeFormat("now", "year"));            $("#startoff").attr("min", formats.timeFormat("now", "year")).val(formats.timeFormat("now", "year"));        } else if (addOrView == "view") {            $(".back").attr("data", "detail");            nps.initDetail();        }    },    npsView: function (data) { //查看表单        if (data.initInfo && data.initInfo != "") {            var value = data.initInfo[0];            $("#userName").html(value.APPLYNAME);            $("#userCard").html(value.ID_CARD);            $("#SEXp").html(numToContent.sexContent(value.SEX));            $("#userJobp").html(value.DUTY);            $("#reasonsp").html(value.REASONS);            $("#off_typep").html(value.OFF_TYPE);            $("#startoffp").html(value.STARTOFF);            $("#endoffp").html(value.ENDOFF);            $("#countryp").html(value.COUNTRY);            $("#retinuep").html(value.RETINUE);            if (value.COST_TYPE=="1") {                //$("#cost_typep").html(value.COST_TYPE);                $("#moneyp").html("是");            } else {                //$("#cost_typep").html("0");                $("#moneyp").html("否");            }        }    },    resaveNps: function (data) { //重新发起时，可以查看和修改之前的数据        var value;        if (data.initInfo && data.initInfo != "") {            value = data.initInfo[0];            $("#userName").text(value.APPLYNAME);            $("#SEXp").text(numToContent.sexContent(value.SEX));            $("#userCard").text(value.ID_CARD);            $("#userJob").text(value.DUTY);            $("#reasons").text(value.REASONS);            $("#off_type").val(value.OFF_TYPE);            var startDate = value.STARTOFF;            var endDate = value.ENDOFF;            if (startDate && startDate != "") {                $("#startoff").val(startDate.substring(0, 10)).parent().removeClass("dateBg");            }            if (endDate && endDate != "") {                $("#endoff").val(endDate.substring(0, 10)).parent().removeClass("dateBg");            }            $("#endoff").attr("min", formats.timeFormat("now", "year"));            $("#country").val(value.COUNTRY);            $("#retinue").val(value.RETINUE);            if (value.COST_TYPE=="1") {                //$("#cost_type").val(value.COST_TYPE);                $("#money").val("1");            } else {                //$("#cost_type").val("0");                $("#money").val("0");            }        }    },    addCheck: function () {  //发起业务时各表单需验证的情况略不相同        if ($("#money").val == "1"||$("#money").val == "0") {            commons.alertMsg(formats.checkFormat());        } else {            commons.alertMsg("请选择费用是否自理");            setTimeout(function () {                $(".locked").fadeOut(300);            }, 1800);        }    },add:function() { //表单提交"cost_type": $("#cost_type").val(),        var datas = {            "startoff": $("#startoff").val(), "endoff": $("#endoff").val(),            "country": $("#country").val(),            "reasons": $("#reasons").val(), "retinue": $("#retinue").val(),            "off_type": $("#off_type").val(), "instance": $("#instance").val(),            "applyname": $("#userName").text(), "duty": $("#userJob").val(),            "sex": $('input:radio[name="sex"]:checked').val(),            "business": businessId, "id_card": $("#userCard").text()        };        $(".locked").fadeIn();        $(".modalBg").hide();        commons.saveData(datas);    }};single.init();