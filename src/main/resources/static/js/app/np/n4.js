single = {    init: function () {        tableType = "director";        inputType = "text,anddate";        needUserInfo = 1;        addOrView = getCookie("addOrView");        single.bind();        if (addOrView == "add") {            $(".back").attr("data", "add");            nps.initAdd();        } else if (addOrView == "view") {            $(".back").attr("data", "detail");            nps.initDetail();        }        $("#startoff,#endoff").attr("min", formats.timeFormat("now", "year"));        $("#startoff").attr("min", formats.timeFormat("now", "year")).val(formats.timeFormat("now", "year"));    },    npsView: function (data) {        if (data.initInfo && data.initInfo != "") {            var value = data.initInfo[0];            $("#userName").html(value.NAME);            $("#userJobp").html(value.DUTY);            $("#reasonsp").html(value.REASONS);            $("#off_typep").html(value.OFF_TYPE);            $("#startoffp").html(value.STARTOFF);            $("#endoffp").html(value.ENDOFF);            $("#offdaysp").html(value.OFFDAYS);            $("#destinationp").html(value.DESTINATION);            $("#interim_manp").html(value.INTERIM_MAN);        }    },    resaveNps: function (data) { //重新发起时，可以查看和修改之前的数据        var value;        if (data.initInfo && data.initInfo != "") {            value = data.initInfo[0];            $("#userName").html(value.NAME);            $("#userJob").text(value.DUTY);            $("#reasons").text(value.REASONS);            $("#off_type").val(value.OFF_TYPE);            $("#startoff").val(value.STARTOFF);            $("#endoff").val(value.ENDOFF);            $("#offdaysp").html(value.OFFDAYS);            $("#destination").val(value.DESTINATION);            $("#interim_man").val(value.INTERIM_MAN);        }    },    addCheck: function () {  //发起业务时各表单需验证的情况略不相同        commons.alertMsg(formats.checkFormat());    },add:function() { //表单提交        var datas = {            "destination": $("#destination").val(),            "endoff": $("#endoff").val(),            "interim_man": $("#interim_man").val(),            "off_type": $("#off_type").val(),            "offdays": $("#offdaysp").text(),            "reasons": $("#reasons").val(),            "startoff": $("#startoff").val(),            "applyname": $("#userName").text(),            "business": businessId,            "duty": $("#userJob").val()        };        $(".locked").fadeIn();        $(".modalBg").hide();        commons.saveData(datas);    },bind:function(){    }};single.init();